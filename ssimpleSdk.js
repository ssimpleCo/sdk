(()=>{"use strict";var t,e={};function n(t){return t.nodeType===t.ELEMENT_NODE}function o(t){var e=null==t?void 0:t.host;return Boolean((null==e?void 0:e.shadowRoot)===t)}function r(t){return"[object ShadowRoot]"===Object.prototype.toString.call(t)}function s(t){try{var e=t.rules||t.cssRules;return e?((n=Array.from(e).map(i).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n):null}catch(t){return null}var n}function i(t){var e=t.cssText;if(function(t){return"styleSheet"in t}(t))try{e=s(t.styleSheet)||e}catch(t){}return e}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(t||(t={}));var a=function(){function t(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return t.prototype.getId=function(t){var e;if(!t)return-1;var n=null===(e=this.getMeta(t))||void 0===e?void 0:e.id;return null!=n?n:-1},t.prototype.getNode=function(t){return this.idNodeMap.get(t)||null},t.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},t.prototype.getMeta=function(t){return this.nodeMetaMap.get(t)||null},t.prototype.removeNodeFromMap=function(t){var e=this,n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach((function(t){return e.removeNodeFromMap(t)}))},t.prototype.has=function(t){return this.idNodeMap.has(t)},t.prototype.hasNode=function(t){return this.nodeMetaMap.has(t)},t.prototype.add=function(t,e){var n=e.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,e)},t.prototype.replace=function(t,e){var n=this.getNode(t);if(n){var o=this.nodeMetaMap.get(n);o&&this.nodeMetaMap.set(e,o)}this.idNodeMap.set(t,e)},t.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},t}();function l(t){var e=t.maskInputOptions,n=t.tagName,o=t.type,r=t.value,s=t.maskInputFn,i=r||"";return(e[n.toLowerCase()]||e[o])&&(i=s?s(i):"*".repeat(i.length)),i}var c="__rrweb_original__";var d,u,p=1,h=new RegExp("[^a-z0-9-_:]"),g=-2;function m(){return p++}var I=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,C=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,f=/^(data:)([^,]*),(.*)/i;function y(t,e){return(t||"").replace(I,(function(t,n,o,r,s,i){var a,l=o||s||i,c=n||r||"";if(!l)return t;if(!C.test(l))return"url(".concat(c).concat(l).concat(c,")");if(f.test(l))return"url(".concat(c).concat(l).concat(c,")");if("/"===l[0])return"url(".concat(c).concat((a=e,(a.indexOf("//")>-1?a.split("/").slice(0,3).join("/"):a.split("/")[0]).split("?")[0]+l)).concat(c,")");var d=e.split("/"),u=l.split("/");d.pop();for(var p=0,h=u;p<h.length;p++){var g=h[p];"."!==g&&(".."===g?d.pop():d.push(g))}return"url(".concat(c).concat(d.join("/")).concat(c,")")}))}var b=/^[^ \t\n\r\u000c]+/,v=/^[, \t\n\r\u000c]+/;function S(t,e){if(!e||""===e.trim())return e;var n=t.createElement("a");return n.href=e,n.href}function A(t){return Boolean("svg"===t.tagName||t.ownerSVGElement)}function k(){var t=document.createElement("a");return t.href="",t.href}function w(t,e,n,o){return"src"===n||"href"===n&&o&&("use"!==e||"#"!==o[0])||"xlink:href"===n&&o&&"#"!==o[0]?S(t,o):"background"!==n||!o||"table"!==e&&"td"!==e&&"th"!==e?"srcset"===n&&o?function(t,e){if(""===e.trim())return e;var n=0;function o(t){var o,r=t.exec(e.substring(n));return r?(o=r[0],n+=o.length,o):""}for(var r=[];o(v),!(n>=e.length);){var s=o(b);if(","===s.slice(-1))s=S(t,s.substring(0,s.length-1)),r.push(s);else{var i="";s=S(t,s);for(var a=!1;;){var l=e.charAt(n);if(""===l){r.push((s+i).trim());break}if(a)")"===l&&(a=!1);else{if(","===l){n+=1,r.push((s+i).trim());break}"("===l&&(a=!0)}i+=l,n+=1}}}return r.join(", ")}(t,o):"style"===n&&o?y(o,k()):"object"===e&&"data"===n&&o?S(t,o):o:S(t,o)}function M(t,e,n){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return!!n&&M(t.parentNode,e,n);for(var o=t.classList.length;o--;){var r=t.classList[o];if(e.test(r))return!0}return!!n&&M(t.parentNode,e,n)}function T(t,e,n){var o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(null===o)return!1;if("string"==typeof e){if(o.classList.contains(e))return!0;if(o.closest(".".concat(e)))return!0}else if(M(o,e,!0))return!0;if(n){if(o.matches(n))return!0;if(o.closest(n))return!0}return!1}function R(e,n){var o=n.doc,r=n.mirror,i=n.blockClass,a=n.blockSelector,p=n.maskTextClass,g=n.maskTextSelector,m=n.inlineStylesheet,I=n.maskInputOptions,C=void 0===I?{}:I,f=n.maskTextFn,b=n.maskInputFn,v=n.dataURLOptions,S=void 0===v?{}:v,M=n.inlineImages,R=n.recordCanvas,N=n.keepIframeSrcFn,E=n.newlyAddedElement,O=void 0!==E&&E,x=function(t,e){if(!e.hasNode(t))return;var n=e.getId(t);return 1===n?void 0:n}(o,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:t.Document,childNodes:[],compatMode:e.compatMode}:{type:t.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:t.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:x};case e.ELEMENT_NODE:return function(e,n){for(var o=n.doc,r=n.blockClass,i=n.blockSelector,a=n.inlineStylesheet,p=n.maskInputOptions,g=void 0===p?{}:p,m=n.maskInputFn,I=n.dataURLOptions,C=void 0===I?{}:I,f=n.inlineImages,b=n.recordCanvas,v=n.keepIframeSrcFn,S=n.newlyAddedElement,M=void 0!==S&&S,T=n.rootId,R=function(t,e,n){if("string"==typeof e){if(t.classList.contains(e))return!0}else for(var o=t.classList.length;o--;){var r=t.classList[o];if(e.test(r))return!0}return!!n&&t.matches(n)}(e,r,i),N=function(t){if(t instanceof HTMLFormElement)return"form";var e=t.tagName.toLowerCase().trim();return h.test(e)?"div":e}(e),E={},O=e.attributes.length,x=0;x<O;x++){var F=e.attributes[x];E[F.name]=w(o,N,F.name,F.value)}if("link"===N&&a){var L=Array.from(o.styleSheets).find((function(t){return t.href===e.href})),D=null;L&&(D=s(L)),D&&(delete E.rel,delete E.href,E._cssText=y(D,L.href))}if("style"===N&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){(D=s(e.sheet))&&(E._cssText=y(D,k()))}if("input"===N||"textarea"===N||"select"===N){var W=e.value,B=e.checked;"radio"!==E.type&&"checkbox"!==E.type&&"submit"!==E.type&&"button"!==E.type&&W?E.value=l({type:E.type,tagName:N,value:W,maskInputOptions:g,maskInputFn:m}):B&&(E.checked=B)}"option"===N&&(e.selected&&!g.select?E.selected=!0:delete E.selected);if("canvas"===N&&b)if("2d"===e.__context)(function(t){var e=t.getContext("2d");if(!e)return!0;for(var n=0;n<t.width;n+=50)for(var o=0;o<t.height;o+=50){var r=e.getImageData,s=c in r?r[c]:r;if(new Uint32Array(s.call(e,n,o,Math.min(50,t.width-n),Math.min(50,t.height-o)).data.buffer).some((function(t){return 0!==t})))return!1}return!0})(e)||(E.rr_dataURL=e.toDataURL(C.type,C.quality));else if(!("__context"in e)){var Z=e.toDataURL(C.type,C.quality),G=document.createElement("canvas");G.width=e.width,G.height=e.height,Z!==G.toDataURL(C.type,C.quality)&&(E.rr_dataURL=Z)}if("img"===N&&f){d||(d=o.createElement("canvas"),u=d.getContext("2d"));var V=e,U=V.crossOrigin;V.crossOrigin="anonymous";var K=function(){try{d.width=V.naturalWidth,d.height=V.naturalHeight,u.drawImage(V,0,0),E.rr_dataURL=d.toDataURL(C.type,C.quality)}catch(t){console.warn("Cannot inline img src=".concat(V.currentSrc,"! Error: ").concat(t))}U?E.crossOrigin=U:V.removeAttribute("crossorigin")};V.complete&&0!==V.naturalWidth?K():V.onload=K}"audio"!==N&&"video"!==N||(E.rr_mediaState=e.paused?"paused":"played",E.rr_mediaCurrentTime=e.currentTime);M||(e.scrollLeft&&(E.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(E.rr_scrollTop=e.scrollTop));if(R){var Y=e.getBoundingClientRect(),J=Y.width,z=Y.height;E={class:E.class,rr_width:"".concat(J,"px"),rr_height:"".concat(z,"px")}}"iframe"!==N||v(E.src)||(e.contentDocument||(E.rr_src=E.src),delete E.src);return{type:t.Element,tagName:N,attributes:E,childNodes:[],isSVG:A(e)||void 0,needBlock:R,rootId:T}}(e,{doc:o,blockClass:i,blockSelector:a,inlineStylesheet:m,maskInputOptions:C,maskInputFn:b,dataURLOptions:S,inlineImages:M,recordCanvas:R,keepIframeSrcFn:N,newlyAddedElement:O,rootId:x});case e.TEXT_NODE:return function(e,n){var o,r=n.maskTextClass,s=n.maskTextSelector,i=n.maskTextFn,a=n.rootId,l=e.parentNode&&e.parentNode.tagName,c=e.textContent,d="STYLE"===l||void 0,u="SCRIPT"===l||void 0;if(d&&c){try{e.nextSibling||e.previousSibling||(null===(o=e.parentNode.sheet)||void 0===o?void 0:o.cssRules)&&(c=(p=e.parentNode.sheet).cssRules?Array.from(p.cssRules).map((function(t){return t.cssText||""})).join(""):"")}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),e)}c=y(c,k())}var p;u&&(c="SCRIPT_PLACEHOLDER");!d&&!u&&c&&T(e,r,s)&&(c=i?i(c):c.replace(/[\S]/g,"*"));return{type:t.Text,textContent:c||"",isStyle:d,rootId:a}}(e,{maskTextClass:p,maskTextSelector:g,maskTextFn:f,rootId:x});case e.CDATA_SECTION_NODE:return{type:t.CDATA,textContent:"",rootId:x};case e.COMMENT_NODE:return{type:t.Comment,textContent:e.textContent||"",rootId:x};default:return!1}}function N(t){return void 0===t?"":t.toLowerCase()}function E(e,s){var i,a=s.doc,l=s.mirror,c=s.blockClass,d=s.blockSelector,u=s.maskTextClass,p=s.maskTextSelector,h=s.skipChild,I=void 0!==h&&h,C=s.inlineStylesheet,f=void 0===C||C,y=s.maskInputOptions,b=void 0===y?{}:y,v=s.maskTextFn,S=s.maskInputFn,A=s.slimDOMOptions,k=s.dataURLOptions,w=void 0===k?{}:k,M=s.inlineImages,T=void 0!==M&&M,O=s.recordCanvas,x=void 0!==O&&O,F=s.onSerialize,L=s.onIframeLoad,D=s.iframeLoadTimeout,W=void 0===D?5e3:D,B=s.onStylesheetLoad,Z=s.stylesheetLoadTimeout,G=void 0===Z?5e3:Z,V=s.keepIframeSrcFn,U=void 0===V?function(){return!1}:V,K=s.newlyAddedElement,Y=void 0!==K&&K,J=s.preserveWhiteSpace,z=void 0===J||J,Q=R(e,{doc:a,mirror:l,blockClass:c,blockSelector:d,maskTextClass:u,maskTextSelector:p,inlineStylesheet:f,maskInputOptions:b,maskTextFn:v,maskInputFn:S,dataURLOptions:w,inlineImages:T,recordCanvas:x,keepIframeSrcFn:U,newlyAddedElement:Y});if(!Q)return console.warn(e,"not serialized"),null;i=l.hasNode(e)?l.getId(e):!function(e,n){if(n.comment&&e.type===t.Comment)return!0;if(e.type===t.Element){if(n.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(n.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(N(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===N(e.attributes.name)||"icon"===N(e.attributes.rel)||"apple-touch-icon"===N(e.attributes.rel)||"shortcut icon"===N(e.attributes.rel))))return!0;if("meta"===e.tagName){if(n.headMetaDescKeywords&&N(e.attributes.name).match(/^description|keywords$/))return!0;if(n.headMetaSocial&&(N(e.attributes.property).match(/^(og|twitter|fb):/)||N(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===N(e.attributes.name)))return!0;if(n.headMetaRobots&&("robots"===N(e.attributes.name)||"googlebot"===N(e.attributes.name)||"bingbot"===N(e.attributes.name)))return!0;if(n.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(n.headMetaAuthorship&&("author"===N(e.attributes.name)||"generator"===N(e.attributes.name)||"framework"===N(e.attributes.name)||"publisher"===N(e.attributes.name)||"progid"===N(e.attributes.name)||N(e.attributes.property).match(/^article:/)||N(e.attributes.property).match(/^product:/)))return!0;if(n.headMetaVerification&&("google-site-verification"===N(e.attributes.name)||"yandex-verification"===N(e.attributes.name)||"csrf-token"===N(e.attributes.name)||"p:domain_verify"===N(e.attributes.name)||"verify-v1"===N(e.attributes.name)||"verification"===N(e.attributes.name)||"shopify-checkout-api-token"===N(e.attributes.name)))return!0}}return!1}(Q,A)&&(z||Q.type!==t.Text||Q.isStyle||Q.textContent.replace(/^\s+|\s+$/gm,"").length)?m():g;var _=Object.assign(Q,{id:i});if(l.add(e,_),i===g)return null;F&&F(e);var H=!I;if(_.type===t.Element){H=H&&!_.needBlock,delete _.needBlock;var j=e.shadowRoot;j&&r(j)&&(_.isShadowHost=!0)}if((_.type===t.Document||_.type===t.Element)&&H){A.headWhitespace&&_.type===t.Element&&"head"===_.tagName&&(z=!1);for(var X={doc:a,mirror:l,blockClass:c,blockSelector:d,maskTextClass:u,maskTextSelector:p,skipChild:I,inlineStylesheet:f,maskInputOptions:b,maskTextFn:v,maskInputFn:S,slimDOMOptions:A,dataURLOptions:w,inlineImages:T,recordCanvas:x,preserveWhiteSpace:z,onSerialize:F,onIframeLoad:L,iframeLoadTimeout:W,onStylesheetLoad:B,stylesheetLoadTimeout:G,keepIframeSrcFn:U},P=0,q=Array.from(e.childNodes);P<q.length;P++){(et=E(q[P],X))&&_.childNodes.push(et)}if(n(e)&&e.shadowRoot)for(var $=0,tt=Array.from(e.shadowRoot.childNodes);$<tt.length;$++){var et;(et=E(tt[$],X))&&(r(e.shadowRoot)&&(et.isShadow=!0),_.childNodes.push(et))}}return e.parentNode&&o(e.parentNode)&&r(e.parentNode)&&(_.isShadow=!0),_.type===t.Element&&"iframe"===_.tagName&&function(t,e,n){var o=t.contentWindow;if(o){var r,s=!1;try{r=o.document.readyState}catch(t){return}if("complete"===r){var i="about:blank";if(o.location.href!==i||t.src===i||""===t.src)return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}else{var a=setTimeout((function(){s||(e(),s=!0)}),n);t.addEventListener("load",(function(){clearTimeout(a),s=!0,e()}))}}}(e,(function(){var t=e.contentDocument;if(t&&L){var n=E(t,{doc:t,mirror:l,blockClass:c,blockSelector:d,maskTextClass:u,maskTextSelector:p,skipChild:!1,inlineStylesheet:f,maskInputOptions:b,maskTextFn:v,maskInputFn:S,slimDOMOptions:A,dataURLOptions:w,inlineImages:T,recordCanvas:x,preserveWhiteSpace:z,onSerialize:F,onIframeLoad:L,iframeLoadTimeout:W,onStylesheetLoad:B,stylesheetLoadTimeout:G,keepIframeSrcFn:U});n&&L(e,n)}}),W),_.type===t.Element&&"link"===_.tagName&&"stylesheet"===_.attributes.rel&&function(t,e,n){var o,r=!1;try{o=t.sheet}catch(t){return}if(!o){var s=setTimeout((function(){r||(e(),r=!0)}),n);t.addEventListener("load",(function(){clearTimeout(s),r=!0,e()}))}}(e,(function(){if(B){var t=E(e,{doc:a,mirror:l,blockClass:c,blockSelector:d,maskTextClass:u,maskTextSelector:p,skipChild:!1,inlineStylesheet:f,maskInputOptions:b,maskTextFn:v,maskInputFn:S,slimDOMOptions:A,dataURLOptions:w,inlineImages:T,recordCanvas:x,preserveWhiteSpace:z,onSerialize:F,onIframeLoad:L,iframeLoadTimeout:W,onStylesheetLoad:B,stylesheetLoadTimeout:G,keepIframeSrcFn:U});t&&B(e,t)}}),G),_}var O=/([^\\]):hover/;new RegExp(O.source,"g");function x(t,e,n=document){const o={capture:!0,passive:!0};return n.addEventListener(t,e,o),()=>n.removeEventListener(t,e,o)}const F="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let L={map:{},getId:()=>(console.error(F),-1),getNode:()=>(console.error(F),null),removeNodeFromMap(){console.error(F)},has:()=>(console.error(F),!1),reset(){console.error(F)}};function D(t,e,n={}){let o=null,r=0;return function(...s){const i=Date.now();r||!1!==n.leading||(r=i);const a=e-(i-r),l=this;a<=0||a>e?(o&&(clearTimeout(o),o=null),r=i,t.apply(l,s)):o||!1===n.trailing||(o=setTimeout((()=>{r=!1===n.leading?0:Date.now(),o=null,t.apply(l,s)}),a))}}function W(t,e,n,o,r=window){const s=r.Object.getOwnPropertyDescriptor(t,e);return r.Object.defineProperty(t,e,o?n:{set(t){setTimeout((()=>{n.set.call(this,t)}),0),s&&s.set&&s.set.call(this,t)}}),()=>W(t,e,s||{},!0)}function B(t,e,n){try{if(!(e in t))return()=>{};const o=t[e],r=n(o);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:o}})),t[e]=r,()=>{t[e]=o}}catch(t){return()=>{}}}function Z(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function G(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function V(t,e,n,o){if(!t)return!1;const r=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(!r)return!1;if("string"==typeof e){if(r.classList.contains(e))return!0;if(o&&null!==r.closest("."+e))return!0}else if(M(r,e,o))return!0;if(n){if(t.matches(n))return!0;if(o&&null!==r.closest(n))return!0}return!1}function U(t,e){return e.getId(t)===g}function K(t,e){if(o(t))return!1;const n=e.getId(t);return!e.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||K(t.parentNode,e))}function Y(t){return Boolean(t.changedTouches)}function J(t,e){return Boolean("IFRAME"===t.nodeName&&e.getMeta(t))}function z(t,e){return Boolean("LINK"===t.nodeName&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&"stylesheet"===t.getAttribute("rel")&&e.getMeta(t))}function Q(t){return Boolean(null==t?void 0:t.shadowRoot)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(L=new Proxy(L,{get:(t,e,n)=>("map"===e&&console.error(F),Reflect.get(t,e,n))}));class _{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var e;return null!==(e=this.styleIDMap.get(t))&&void 0!==e?e:-1}has(t){return this.styleIDMap.has(t)}add(t,e){if(this.has(t))return this.getId(t);let n;return n=void 0===e?this.id++:e,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var H=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(H||{}),j=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t))(j||{}),X=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(X||{}),P=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(P||{});function q(t){return"__ln"in t}class ${constructor(){this.length=0,this.head=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let e=this.head;for(let n=0;n<t;n++)e=(null==e?void 0:e.next)||null;return e}addNode(t){const e={value:t,previous:null,next:null};if(t.__ln=e,t.previousSibling&&q(t.previousSibling)){const n=t.previousSibling.__ln.next;e.next=n,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,n&&(n.previous=e)}else if(t.nextSibling&&q(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;e.previous=n,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,n&&(n.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;this.length++}removeNode(t){const e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next&&(e.next.previous=e.previous)):(this.head=e.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)}}const tt=(t,e)=>`${t}@${e}`;class et{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],e=new $,n=t=>{let e=t,n=g;for(;n===g;)e=e&&e.nextSibling,n=e&&this.mirror.getId(e);return n},r=r=>{var s,i,a,l;let c=null;(null===(i=null===(s=r.getRootNode)||void 0===s?void 0:s.call(r))||void 0===i?void 0:i.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&r.getRootNode().host&&(c=r.getRootNode().host);let d=c;for(;(null===(l=null===(a=null==d?void 0:d.getRootNode)||void 0===a?void 0:a.call(d))||void 0===l?void 0:l.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&d.getRootNode().host;)d=d.getRootNode().host;const u=!(this.doc.contains(r)||d&&this.doc.contains(d));if(!r.parentNode||u)return;const p=o(r.parentNode)?this.mirror.getId(c):this.mirror.getId(r.parentNode),h=n(r);if(-1===p||-1===h)return e.addNode(r);const g=E(r,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:t=>{J(t,this.mirror)&&this.iframeManager.addIframe(t),z(t,this.mirror)&&this.stylesheetManager.trackLinkElement(t),Q(r)&&this.shadowDomManager.addShadowRoot(r.shadowRoot,this.doc)},onIframeLoad:(t,e)=>{this.iframeManager.attachIframe(t,e),this.shadowDomManager.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{this.stylesheetManager.attachLinkElement(t,e)}});g&&t.push({parentId:p,nextId:h,node:g})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const t of Array.from(this.movedSet.values()))ot(this.removes,t,this.mirror)&&!this.movedSet.has(t.parentNode)||r(t);for(const t of Array.from(this.addedSet.values()))st(this.droppedSet,t)||ot(this.removes,t,this.mirror)?st(this.movedSet,t)?r(t):this.droppedSet.add(t):r(t);let s=null;for(;e.length;){let t=null;if(s){const e=this.mirror.getId(s.value.parentNode),o=n(s.value);-1!==e&&-1!==o&&(t=s)}if(!t)for(let o=e.length-1;o>=0;o--){const r=e.get(o);if(r){const e=this.mirror.getId(r.value.parentNode);if(-1===n(r.value))continue;if(-1!==e){t=r;break}{const e=r.value;if(e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const n=e.parentNode.host;if(-1!==this.mirror.getId(n)){t=r;break}}}}}if(!t){for(;e.head;)e.removeNode(e.head.value);break}s=t.previous,e.removeNode(t.value),r(t.value)}const i={texts:this.texts.map((t=>({id:this.mirror.getId(t.node),value:t.value}))).filter((t=>this.mirror.has(t.id))),attributes:this.attributes.map((t=>({id:this.mirror.getId(t.node),attributes:t.attributes}))).filter((t=>this.mirror.has(t.id))),removes:this.removes,adds:t};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=t=>{if(!U(t.target,this.mirror))switch(t.type){case"characterData":{const e=t.target.textContent;V(t.target,this.blockClass,this.blockSelector,!1)||e===t.oldValue||this.texts.push({value:T(t.target,this.maskTextClass,this.maskTextSelector)&&e?this.maskTextFn?this.maskTextFn(e):e.replace(/[\S]/g,"*"):e,node:t.target});break}case"attributes":{const e=t.target;let n=t.target.getAttribute(t.attributeName);if("value"===t.attributeName&&(n=l({maskInputOptions:this.maskInputOptions,tagName:t.target.tagName,type:t.target.getAttribute("type"),value:n,maskInputFn:this.maskInputFn})),V(t.target,this.blockClass,this.blockSelector,!1)||n===t.oldValue)return;let o=this.attributes.find((e=>e.node===t.target));if("IFRAME"===e.tagName&&"src"===t.attributeName&&!this.keepIframeSrcFn(n)){if(e.contentDocument)return;t.attributeName="rr_src"}if(o||(o={node:t.target,attributes:{}},this.attributes.push(o)),"style"===t.attributeName){const n=this.doc.createElement("span");t.oldValue&&n.setAttribute("style",t.oldValue),void 0!==o.attributes.style&&null!==o.attributes.style||(o.attributes.style={});const r=o.attributes.style;for(const t of Array.from(e.style)){const o=e.style.getPropertyValue(t),s=e.style.getPropertyPriority(t);o===n.style.getPropertyValue(t)&&s===n.style.getPropertyPriority(t)||(r[t]=""===s?o:[o,s])}for(const t of Array.from(n.style))""===e.style.getPropertyValue(t)&&(r[t]=!1)}else o.attributes[t.attributeName]=w(this.doc,e.tagName,t.attributeName,n);break}case"childList":if(V(t.target,this.blockClass,this.blockSelector,!0))return;t.addedNodes.forEach((e=>this.genAdds(e,t.target))),t.removedNodes.forEach((e=>{const n=this.mirror.getId(e),s=o(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);V(t.target,this.blockClass,this.blockSelector,!1)||U(e,this.mirror)||!function(t,e){return-1!==e.getId(t)}(e,this.mirror)||(this.addedSet.has(e)?(nt(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(t.target)&&-1===n||K(t.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[tt(n,s)]?nt(this.movedSet,e):this.removes.push({parentId:s,id:n,isShadow:!(!o(t.target)||!r(t.target))||void 0})),this.mapRemoves.push(e))}))}},this.genAdds=(t,e)=>{if(this.mirror.hasNode(t)){if(U(t,this.mirror))return;this.movedSet.add(t);let n=null;e&&this.mirror.hasNode(e)&&(n=this.mirror.getId(e)),n&&-1!==n&&(this.movedMap[tt(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);V(t,this.blockClass,this.blockSelector,!1)||t.childNodes.forEach((t=>this.genAdds(t)))}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach((e=>{this[e]=t[e]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function nt(t,e){t.delete(e),e.childNodes.forEach((e=>nt(t,e)))}function ot(t,e,n){return 0!==t.length&&rt(t,e,n)}function rt(t,e,n){const{parentNode:o}=e;if(!o)return!1;const r=n.getId(o);return!!t.some((t=>t.id===r))||rt(t,o,n)}function st(t,e){return 0!==t.size&&it(t,e)}function it(t,e){const{parentNode:n}=e;return!!n&&(!!t.has(n)||it(t,n))}const at=[],lt="undefined"!=typeof CSSGroupingRule,ct="undefined"!=typeof CSSMediaRule,dt="undefined"!=typeof CSSSupportsRule,ut="undefined"!=typeof CSSConditionRule;function pt(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0];return t.target}catch(e){return t.target}}function ht(t,e){var n,o;const r=new et;at.push(r),r.init(t);let s=window.MutationObserver||window.__rrMutationObserver;const i=null===(o=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===o?void 0:o.call(n,"MutationObserver");i&&window[i]&&(s=window[i]);const a=new s(r.processMutations.bind(r));return a.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function gt({mouseInteractionCb:t,doc:e,mirror:n,blockClass:o,blockSelector:r,sampling:s}){if(!1===s.mouseInteraction)return()=>{};const i=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,a=[];return Object.keys(X).filter((t=>Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==i[t])).forEach((s=>{const i=s.toLowerCase(),l=(e=>s=>{const i=pt(s);if(V(i,o,r,!0))return;const a=Y(s)?s.changedTouches[0]:s;if(!a)return;const l=n.getId(i),{clientX:c,clientY:d}=a;t({type:X[e],id:l,x:c,y:d})})(s);a.push(x(i,l,e))})),()=>{a.forEach((t=>t()))}}function mt({scrollCb:t,doc:e,mirror:n,blockClass:o,blockSelector:r,sampling:s}){return x("scroll",D((s=>{const i=pt(s);if(!i||V(i,o,r,!0))return;const a=n.getId(i);if(i===e){const n=e.scrollingElement||e.documentElement;t({id:a,x:n.scrollLeft,y:n.scrollTop})}else t({id:a,x:i.scrollLeft,y:i.scrollTop})}),s.scroll||100),e)}function It(t,e){const n=Object.assign({},t);return e||delete n.userTriggered,n}const Ct=["INPUT","TEXTAREA","SELECT"],ft=new WeakMap;function yt(t){return function(t,e){if(lt&&t.parentRule instanceof CSSGroupingRule||ct&&t.parentRule instanceof CSSMediaRule||dt&&t.parentRule instanceof CSSSupportsRule||ut&&t.parentRule instanceof CSSConditionRule){const n=Array.from(t.parentRule.cssRules).indexOf(t);e.unshift(n)}else if(t.parentStyleSheet){const n=Array.from(t.parentStyleSheet.cssRules).indexOf(t);e.unshift(n)}return e}(t,[])}function bt(t,e,n){let o,r;return t?(t.ownerNode?o=e.getId(t.ownerNode):r=n.getId(t),{styleId:r,id:o}):{}}function vt({mirror:t,stylesheetManager:e},n){var o,r,s;let i=null;i="#document"===n.nodeName?t.getId(n):t.getId(n.host);const a="#document"===n.nodeName?null===(o=n.defaultView)||void 0===o?void 0:o.Document:null===(s=null===(r=n.ownerDocument)||void 0===r?void 0:r.defaultView)||void 0===s?void 0:s.ShadowRoot,l=Object.getOwnPropertyDescriptor(null==a?void 0:a.prototype,"adoptedStyleSheets");return null!==i&&-1!==i&&a&&l?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get(){var t;return null===(t=l.get)||void 0===t?void 0:t.call(this)},set(t){var n;const o=null===(n=l.set)||void 0===n?void 0:n.call(this,t);if(null!==i&&-1!==i)try{e.adoptStyleSheets(t,i)}catch(t){}return o}}),()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})}):()=>{}}function St(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};!function(t,e){const{mutationCb:n,mousemoveCb:o,mouseInteractionCb:r,scrollCb:s,viewportResizeCb:i,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:c,styleDeclarationCb:d,canvasMutationCb:u,fontCb:p,selectionCb:h}=t;t.mutationCb=(...t)=>{e.mutation&&e.mutation(...t),n(...t)},t.mousemoveCb=(...t)=>{e.mousemove&&e.mousemove(...t),o(...t)},t.mouseInteractionCb=(...t)=>{e.mouseInteraction&&e.mouseInteraction(...t),r(...t)},t.scrollCb=(...t)=>{e.scroll&&e.scroll(...t),s(...t)},t.viewportResizeCb=(...t)=>{e.viewportResize&&e.viewportResize(...t),i(...t)},t.inputCb=(...t)=>{e.input&&e.input(...t),a(...t)},t.mediaInteractionCb=(...t)=>{e.mediaInteaction&&e.mediaInteaction(...t),l(...t)},t.styleSheetRuleCb=(...t)=>{e.styleSheetRule&&e.styleSheetRule(...t),c(...t)},t.styleDeclarationCb=(...t)=>{e.styleDeclaration&&e.styleDeclaration(...t),d(...t)},t.canvasMutationCb=(...t)=>{e.canvasMutation&&e.canvasMutation(...t),u(...t)},t.fontCb=(...t)=>{e.font&&e.font(...t),p(...t)},t.selectionCb=(...t)=>{e.selection&&e.selection(...t),h(...t)}}(t,e);const o=ht(t,t.doc),r=function({mousemoveCb:t,sampling:e,doc:n,mirror:o}){if(!1===e.mousemove)return()=>{};const r="number"==typeof e.mousemove?e.mousemove:50,s="number"==typeof e.mousemoveCallback?e.mousemoveCallback:500;let i,a=[];const l=D((e=>{const n=Date.now()-i;t(a.map((t=>(t.timeOffset-=n,t))),e),a=[],i=null}),s),c=D((t=>{const e=pt(t),{clientX:n,clientY:r}=Y(t)?t.changedTouches[0]:t;i||(i=Date.now()),a.push({x:n,y:r,id:o.getId(e),timeOffset:Date.now()-i}),l("undefined"!=typeof DragEvent&&t instanceof DragEvent?j.Drag:t instanceof MouseEvent?j.MouseMove:j.TouchMove)}),r,{trailing:!1}),d=[x("mousemove",c,n),x("touchmove",c,n),x("drag",c,n)];return()=>{d.forEach((t=>t()))}}(t),s=gt(t),i=mt(t),a=function({viewportResizeCb:t}){let e=-1,n=-1;return x("resize",D((()=>{const o=Z(),r=G();e===o&&n===r||(t({width:Number(r),height:Number(o)}),e=o,n=r)}),200),window)}(t),c=function({inputCb:t,doc:e,mirror:n,blockClass:o,blockSelector:r,ignoreClass:s,maskInputOptions:i,maskInputFn:a,sampling:c,userTriggeredOnInput:d}){function u(t){let n=pt(t);const c=t.isTrusted;if(n&&"OPTION"===n.tagName&&(n=n.parentElement),!n||!n.tagName||Ct.indexOf(n.tagName)<0||V(n,o,r,!0))return;const u=n.type;if(n.classList.contains(s))return;let h=n.value,g=!1;"radio"===u||"checkbox"===u?g=n.checked:(i[n.tagName.toLowerCase()]||i[u])&&(h=l({maskInputOptions:i,tagName:n.tagName,type:u,value:h,maskInputFn:a})),p(n,It({text:h,isChecked:g,userTriggered:c},d));const m=n.name;"radio"===u&&m&&g&&e.querySelectorAll(`input[type="radio"][name="${m}"]`).forEach((t=>{t!==n&&p(t,It({text:t.value,isChecked:!g,userTriggered:!1},d))}))}function p(e,o){const r=ft.get(e);if(!r||r.text!==o.text||r.isChecked!==o.isChecked){ft.set(e,o);const r=n.getId(e);t(Object.assign(Object.assign({},o),{id:r}))}}const h=("last"===c.input?["change"]:["input","change"]).map((t=>x(t,u,e))),g=e.defaultView;if(!g)return()=>{h.forEach((t=>t()))};const m=g.Object.getOwnPropertyDescriptor(g.HTMLInputElement.prototype,"value"),I=[[g.HTMLInputElement.prototype,"value"],[g.HTMLInputElement.prototype,"checked"],[g.HTMLSelectElement.prototype,"value"],[g.HTMLTextAreaElement.prototype,"value"],[g.HTMLSelectElement.prototype,"selectedIndex"],[g.HTMLOptionElement.prototype,"selected"]];return m&&m.set&&h.push(...I.map((t=>W(t[0],t[1],{set(){u({target:this})}},!1,g)))),()=>{h.forEach((t=>t()))}}(t),d=function({mediaInteractionCb:t,blockClass:e,blockSelector:n,mirror:o,sampling:r}){const s=s=>D((r=>{const i=pt(r);if(!i||V(i,e,n,!0))return;const{currentTime:a,volume:l,muted:c,playbackRate:d}=i;t({type:s,id:o.getId(i),currentTime:a,volume:l,muted:c,playbackRate:d})}),r.media||500),i=[x("play",s(0)),x("pause",s(1)),x("seeked",s(2)),x("volumechange",s(3)),x("ratechange",s(4))];return()=>{i.forEach((t=>t()))}}(t),u=function({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:o}){const r=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=function(o,s){const{id:i,styleId:a}=bt(this,e,n.styleMirror);return(i&&-1!==i||a&&-1!==a)&&t({id:i,styleId:a,adds:[{rule:o,index:s}]}),r.apply(this,[o,s])};const s=o.CSSStyleSheet.prototype.deleteRule;let i,a;o.CSSStyleSheet.prototype.deleteRule=function(o){const{id:r,styleId:i}=bt(this,e,n.styleMirror);return(r&&-1!==r||i&&-1!==i)&&t({id:r,styleId:i,removes:[{index:o}]}),s.apply(this,[o])},o.CSSStyleSheet.prototype.replace&&(i=o.CSSStyleSheet.prototype.replace,o.CSSStyleSheet.prototype.replace=function(o){const{id:r,styleId:s}=bt(this,e,n.styleMirror);return(r&&-1!==r||s&&-1!==s)&&t({id:r,styleId:s,replace:o}),i.apply(this,[o])}),o.CSSStyleSheet.prototype.replaceSync&&(a=o.CSSStyleSheet.prototype.replaceSync,o.CSSStyleSheet.prototype.replaceSync=function(o){const{id:r,styleId:s}=bt(this,e,n.styleMirror);return(r&&-1!==r||s&&-1!==s)&&t({id:r,styleId:s,replaceSync:o}),a.apply(this,[o])});const l={};lt?l.CSSGroupingRule=o.CSSGroupingRule:(ct&&(l.CSSMediaRule=o.CSSMediaRule),ut&&(l.CSSConditionRule=o.CSSConditionRule),dt&&(l.CSSSupportsRule=o.CSSSupportsRule));const c={};return Object.entries(l).forEach((([o,r])=>{c[o]={insertRule:r.prototype.insertRule,deleteRule:r.prototype.deleteRule},r.prototype.insertRule=function(r,s){const{id:i,styleId:a}=bt(this.parentStyleSheet,e,n.styleMirror);return(i&&-1!==i||a&&-1!==a)&&t({id:i,styleId:a,adds:[{rule:r,index:[...yt(this),s||0]}]}),c[o].insertRule.apply(this,[r,s])},r.prototype.deleteRule=function(r){const{id:s,styleId:i}=bt(this.parentStyleSheet,e,n.styleMirror);return(s&&-1!==s||i&&-1!==i)&&t({id:s,styleId:i,removes:[{index:[...yt(this),r]}]}),c[o].deleteRule.apply(this,[r])}})),()=>{o.CSSStyleSheet.prototype.insertRule=r,o.CSSStyleSheet.prototype.deleteRule=s,i&&(o.CSSStyleSheet.prototype.replace=i),a&&(o.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach((([t,e])=>{e.prototype.insertRule=c[t].insertRule,e.prototype.deleteRule=c[t].deleteRule}))}}(t,{win:n}),p=vt(t,t.doc),h=function({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:o},{win:r}){const s=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=function(r,i,a){var l;if(n.has(r))return s.apply(this,[r,i,a]);const{id:c,styleId:d}=bt(null===(l=this.parentRule)||void 0===l?void 0:l.parentStyleSheet,e,o.styleMirror);return(c&&-1!==c||d&&-1!==d)&&t({id:c,styleId:d,set:{property:r,value:i,priority:a},index:yt(this.parentRule)}),s.apply(this,[r,i,a])};const i=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=function(r){var s;if(n.has(r))return i.apply(this,[r]);const{id:a,styleId:l}=bt(null===(s=this.parentRule)||void 0===s?void 0:s.parentStyleSheet,e,o.styleMirror);return(a&&-1!==a||l&&-1!==l)&&t({id:a,styleId:l,remove:{property:r},index:yt(this.parentRule)}),i.apply(this,[r])},()=>{r.CSSStyleDeclaration.prototype.setProperty=s,r.CSSStyleDeclaration.prototype.removeProperty=i}}(t,{win:n}),g=t.collectFonts?function({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const o=[],r=new WeakMap,s=n.FontFace;n.FontFace=function(t,e,n){const o=new s(t,e,n);return r.set(o,{family:t,buffer:"string"!=typeof e,descriptors:n,fontSource:"string"==typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),o};const i=B(e.fonts,"add",(function(e){return function(n){return setTimeout((()=>{const e=r.get(n);e&&(t(e),r.delete(n))}),0),e.apply(this,[n])}}));return o.push((()=>{n.FontFace=s})),o.push(i),()=>{o.forEach((t=>t()))}}(t):()=>{},m=function(t){const{doc:e,mirror:n,blockClass:o,blockSelector:r,selectionCb:s}=t;let i=!0;const a=()=>{const t=e.getSelection();if(!t||i&&(null==t?void 0:t.isCollapsed))return;i=t.isCollapsed||!1;const a=[],l=t.rangeCount||0;for(let e=0;e<l;e++){const s=t.getRangeAt(e),{startContainer:i,startOffset:l,endContainer:c,endOffset:d}=s;V(i,o,r,!0)||V(c,o,r,!0)||a.push({start:n.getId(i),startOffset:l,end:n.getId(c),endOffset:d})}s({ranges:a})};return a(),x("selectionchange",a)}(t),I=[];for(const e of t.plugins)I.push(e.observer(e.callback,n,e.options));return()=>{at.forEach((t=>t.reset())),o.disconnect(),r(),s(),i(),a(),c(),d(),u(),p(),h(),g(),m(),I.forEach((t=>t()))}}class At{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,e,n,o){const r=n||this.getIdToRemoteIdMap(t),s=o||this.getRemoteIdToIdMap(t);let i=r.get(e);return i||(i=this.generateIdFn(),r.set(e,i),s.set(i,e)),i}getIds(t,e){const n=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return e.map((e=>this.getId(t,e,n,o)))}getRemoteId(t,e,n){const o=n||this.getRemoteIdToIdMap(t);if("number"!=typeof e)return e;const r=o.get(e);return r||-1}getRemoteIds(t,e){const n=this.getRemoteIdToIdMap(t);return e.map((e=>this.getRemoteId(t,e,n)))}reset(t){if(!t)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let e=this.iframeIdToRemoteIdMap.get(t);return e||(e=new Map,this.iframeIdToRemoteIdMap.set(t,e)),e}getRemoteIdToIdMap(t){let e=this.iframeRemoteIdToIdMap.get(t);return e||(e=new Map,this.iframeRemoteIdToIdMap.set(t,e)),e}}class kt{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new At(m),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new At(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,e){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){if("rrweb"===t.data.type){if(!t.source)return;const e=this.crossOriginIframeMap.get(t.source);if(!e)return;const n=this.transformCrossOriginEvent(e,t.data.event);n&&this.wrappedEmit(n,t.data.isCheckout)}}transformCrossOriginEvent(t,e){var n;switch(e.type){case H.FullSnapshot:return this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(e.data.node,t),{timestamp:e.timestamp,type:H.IncrementalSnapshot,data:{source:j.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case H.Meta:case H.Load:case H.DomContentLoaded:return!1;case H.Plugin:return e;case H.Custom:return this.replaceIds(e.data.payload,t,["id","parentId","previousId","nextId"]),e;case H.IncrementalSnapshot:switch(e.data.source){case j.Mutation:return e.data.adds.forEach((e=>{this.replaceIds(e,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(e.node,t)})),e.data.removes.forEach((e=>{this.replaceIds(e,t,["parentId","id"])})),e.data.attributes.forEach((e=>{this.replaceIds(e,t,["id"])})),e.data.texts.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case j.Drag:case j.TouchMove:case j.MouseMove:return e.data.positions.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case j.ViewportResize:return!1;case j.MediaInteraction:case j.MouseInteraction:case j.Scroll:case j.CanvasMutation:case j.Input:return this.replaceIds(e.data,t,["id"]),e;case j.StyleSheetRule:case j.StyleDeclaration:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleId"]),e;case j.Font:return e;case j.Selection:return e.data.ranges.forEach((e=>{this.replaceIds(e,t,["start","end"])})),e;case j.AdoptedStyleSheet:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleIds"]),null===(n=e.data.styles)||void 0===n||n.forEach((e=>{this.replaceStyleIds(e,t,["styleId"])})),e}}}replace(t,e,n,o){for(const r of o)(Array.isArray(e[r])||"number"==typeof e[r])&&(Array.isArray(e[r])?e[r]=t.getIds(n,e[r]):e[r]=t.getId(n,e[r]));return e}replaceIds(t,e,n){return this.replace(this.crossOriginIframeMirror,t,e,n)}replaceStyleIds(t,e,n){return this.replace(this.crossOriginIframeStyleMirror,t,e,n)}replaceIdOnNode(t,e){this.replaceIds(t,e,["id"]),"childNodes"in t&&t.childNodes.forEach((t=>{this.replaceIdOnNode(t,e)}))}}class wt{constructor(t){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;const e=this;this.restorePatches.push(B(Element.prototype,"attachShadow",(function(t){return function(n){const o=t.call(this,n);return this.shadowRoot&&e.addShadowRoot(this.shadowRoot,this.ownerDocument),o}})))}addShadowRoot(t,e){r(t)&&(this.shadowDoms.has(t)||(this.shadowDoms.add(t),ht(Object.assign(Object.assign({},this.bypassOptions),{doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),mt(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),setTimeout((()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),vt({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t)}),0)))}observeAttachShadow(t){if(t.contentWindow){const e=this;this.restorePatches.push(B(t.contentWindow.HTMLElement.prototype,"attachShadow",(function(n){return function(o){const r=n.call(this,o);return this.shadowRoot&&e.addShadowRoot(this.shadowRoot,t.contentDocument),r}})))}}reset(){this.restorePatches.forEach((t=>t())),this.shadowDoms=new WeakSet}}function Mt(t,e,n,o){return new(n||(n=Promise))((function(r,s){function i(t){try{l(o.next(t))}catch(t){s(t)}}function a(t){try{l(o.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}l((o=o.apply(t,e||[])).next())}))}for(var Tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rt="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Nt=0;Nt<64;Nt++)Rt[Tt.charCodeAt(Nt)]=Nt;const Et=new Map;const Ot=(t,e,n)=>{if(!t||!Lt(t,e)&&"object"!=typeof t)return;const o=function(t,e){let n=Et.get(t);return n||(n=new Map,Et.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}(n,t.constructor.name);let r=o.indexOf(t);return-1===r&&(r=o.length,o.push(t)),r};function xt(t,e,n){if(t instanceof Array)return t.map((t=>xt(t,e,n)));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray){return{rr_type:t.constructor.name,args:[Object.values(t)]}}if(t instanceof ArrayBuffer){const e=t.constructor.name,n=function(t){var e,n=new Uint8Array(t),o=n.length,r="";for(e=0;e<o;e+=3)r+=Tt[n[e]>>2],r+=Tt[(3&n[e])<<4|n[e+1]>>4],r+=Tt[(15&n[e+1])<<2|n[e+2]>>6],r+=Tt[63&n[e+2]];return o%3==2?r=r.substring(0,r.length-1)+"=":o%3==1&&(r=r.substring(0,r.length-2)+"=="),r}(t);return{rr_type:e,base64:n}}if(t instanceof DataView){return{rr_type:t.constructor.name,args:[xt(t.buffer,e,n),t.byteOffset,t.byteLength]}}if(t instanceof HTMLImageElement){const e=t.constructor.name,{src:n}=t;return{rr_type:e,src:n}}if(t instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:t.toDataURL()}}if(t instanceof ImageData){return{rr_type:t.constructor.name,args:[xt(t.data,e,n),t.width,t.height]}}if(Lt(t,e)||"object"==typeof t){return{rr_type:t.constructor.name,index:Ot(t,e,n)}}return t}const Ft=(t,e,n)=>[...t].map((t=>xt(t,e,n))),Lt=(t,e)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((t=>"function"==typeof e[t]));return Boolean(n.find((n=>t instanceof e[n])))};function Dt(t,e,n){const o=[];try{const r=B(t.HTMLCanvasElement.prototype,"getContext",(function(t){return function(o,...r){return V(this,e,n,!0)||"__context"in this||(this.__context=o),t.apply(this,[o,...r])}}));o.push(r)}catch(t){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((t=>t()))}}function Wt(t,e,n,o,r,s,i){const a=[],l=Object.getOwnPropertyNames(t);for(const s of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(s))try{if("function"!=typeof t[s])continue;const l=B(t,s,(function(t){return function(...a){const l=t.apply(this,a);if(Ot(l,i,this),!V(this.canvas,o,r,!0)){const t=Ft([...a],i,this),o={type:e,property:s,args:t};n(this.canvas,o)}return l}}));a.push(l)}catch(o){const r=W(t,s,{set(t){n(this.canvas,{type:e,property:s,args:[t],setter:!0})}});a.push(r)}return a}var Bt=null;try{var Zt="undefined"!=typeof module&&"function"==typeof module.require&&module.require("worker_threads")||"function"==typeof require&&require("worker_threads")||"function"==typeof require&&require("worker_threads");Bt=Zt.Worker}catch(t){}function Gt(t,e,n){var o=void 0===e?null:e,r=function(t,e){return Buffer.from(t,"base64").toString(e?"utf16":"utf8")}(t,void 0!==n&&n),s=r.indexOf("\n",10)+1,i=r.substring(s)+(o?"//# sourceMappingURL="+o:"");return function(t){return new Bt(i,Object.assign({},t,{eval:!0}))}}function Vt(t,e,n){var o=void 0===e?null:e,r=function(t,e){var n=atob(t);if(e){for(var o=new Uint8Array(n.length),r=0,s=n.length;r<s;++r)o[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(o.buffer))}return n}(t,void 0!==n&&n),s=r.indexOf("\n",10)+1,i=r.substring(s)+(o?"//# sourceMappingURL="+o:""),a=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(a)}var Ut="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);var Kt,Yt,Jt,zt=(Kt="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",Yt=null,Jt=!1,Ut?Gt(Kt,Yt,Jt):function(t,e,n){var o;return function(r){return o=o||Vt(t,e,n),new Worker(o,r)}}(Kt,Yt,Jt));class Qt{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(t,e)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(t)||this.pendingCanvasMutations.set(t,[]),this.pendingCanvasMutations.get(t).push(e)};const{sampling:e="all",win:n,blockClass:o,blockSelector:r,recordCanvas:s,dataURLOptions:i}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,s&&"all"===e&&this.initCanvasMutationObserver(n,o,r),s&&"number"==typeof e&&this.initCanvasFPSObserver(e,n,o,r,{dataURLOptions:i})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,e,n,o,r){const s=Dt(e,n,o),i=new Map,a=new zt;a.onmessage=t=>{const{id:e}=t.data;if(i.set(e,!1),!("base64"in t.data))return;const{base64:n,type:o,width:r,height:s}=t.data;this.mutationCb({id:e,type:P["2D"],commands:[{property:"clearRect",args:[0,0,r,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:o}]},0,0]}]})};const l=1e3/t;let c,d=0;const u=t=>{d&&t-d<l||(d=t,(()=>{const t=[];return e.document.querySelectorAll("canvas").forEach((e=>{V(e,n,o,!0)||t.push(e)})),t})().forEach((t=>Mt(this,void 0,void 0,(function*(){var e;const n=this.mirror.getId(t);if(i.get(n))return;if(i.set(n,!0),["webgl","webgl2"].includes(t.__context)){const n=t.getContext(t.__context);!1===(null===(e=null==n?void 0:n.getContextAttributes())||void 0===e?void 0:e.preserveDrawingBuffer)&&(null==n||n.clear(n.COLOR_BUFFER_BIT))}const o=yield createImageBitmap(t);a.postMessage({id:n,bitmap:o,width:t.width,height:t.height,dataURLOptions:r.dataURLOptions},[o])}))))),c=requestAnimationFrame(u)};c=requestAnimationFrame(u),this.resetObservers=()=>{s(),cancelAnimationFrame(c)}}initCanvasMutationObserver(t,e,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=Dt(t,e,n),r=function(t,e,n,o){const r=[],s=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const i of s)try{if("function"!=typeof e.CanvasRenderingContext2D.prototype[i])continue;const s=B(e.CanvasRenderingContext2D.prototype,i,(function(r){return function(...s){return V(this.canvas,n,o,!0)||setTimeout((()=>{const n=Ft([...s],e,this);t(this.canvas,{type:P["2D"],property:i,args:n})}),0),r.apply(this,s)}}));r.push(s)}catch(n){const o=W(e.CanvasRenderingContext2D.prototype,i,{set(e){t(this.canvas,{type:P["2D"],property:i,args:[e],setter:!0})}});r.push(o)}return()=>{r.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n),s=function(t,e,n,o,r){const s=[];return s.push(...Wt(e.WebGLRenderingContext.prototype,P.WebGL,t,n,o,0,e)),void 0!==e.WebGL2RenderingContext&&s.push(...Wt(e.WebGL2RenderingContext.prototype,P.WebGL2,t,n,o,0,e)),()=>{s.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n,this.mirror);this.resetObservers=()=>{o(),r(),s()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const t=e=>{this.rafStamps.latestId=e,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((t,e)=>{const n=this.mirror.getId(e);this.flushPendingCanvasMutationFor(e,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(t,e){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||-1===e)return;const o=n.map((t=>{const e=
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}(t,["type"]);return e})),{type:r}=n[0];this.mutationCb({id:e,type:r,commands:o}),this.pendingCanvasMutations.delete(t)}}class _t{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new _,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,e){"_cssText"in e.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:e.id,attributes:e.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,e){if(0===t.length)return;const n={id:e,styleIds:[]},o=[];for(const e of t){let t;if(this.styleMirror.has(e))t=this.styleMirror.getId(e);else{t=this.styleMirror.add(e);const n=Array.from(e.rules||CSSRule);o.push({styleId:t,rules:n.map(((t,e)=>({rule:i(t),index:e})))})}n.styleIds.push(t)}o.length>0&&(n.styles=o),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}function Ht(t){return Object.assign(Object.assign({},t),{timestamp:Date.now()})}let jt,Xt,Pt,qt=!1;const $t=new a;function te(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:o,blockClass:r="rr-block",blockSelector:s=null,ignoreClass:i="rr-ignore",maskTextClass:l="rr-mask",maskTextSelector:c=null,inlineStylesheet:d=!0,maskAllInputs:u,maskInputOptions:p,slimDOMOptions:h,maskInputFn:g,maskTextFn:m,hooks:I,packFn:C,sampling:f={},dataURLOptions:y={},mousemoveWait:b,recordCanvas:v=!1,recordCrossOriginIframes:S=!1,userTriggeredOnInput:A=!1,collectFonts:k=!1,inlineImages:w=!1,plugins:M,keepIframeSrcFn:T=(()=>!1),ignoreCSSAttributes:R=new Set([])}=t,N=!S||window.parent===window;let O=!1;if(!N)try{window.parent.document,O=!1}catch(t){O=!0}if(N&&!e)throw new Error("emit function is required");void 0!==b&&void 0===f.mousemove&&(f.mousemove=b),$t.reset();const F=!0===u?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==p?p:{password:!0},L=!0===h||"all"===h?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===h,headMetaDescKeywords:"all"===h}:h||{};let D;!function(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let e=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do{if(this===e)return!0}while(e=e&&e.parentNode);return!1})}();let W=0;const B=t=>{for(const e of M||[])e.eventProcessor&&(t=e.eventProcessor(t));return C&&(t=C(t)),t};jt=(t,r)=>{var s;if(!(null===(s=at[0])||void 0===s?void 0:s.isFrozen())||t.type===H.FullSnapshot||t.type===H.IncrementalSnapshot&&t.data.source===j.Mutation||at.forEach((t=>t.unfreeze())),N)null==e||e(B(t),r);else if(O){const e={type:"rrweb",event:B(t),isCheckout:r};window.parent.postMessage(e,"*")}if(t.type===H.FullSnapshot)D=t,W=0;else if(t.type===H.IncrementalSnapshot){if(t.data.source===j.Mutation&&t.data.isAttachIframe)return;W++;const e=o&&W>=o,r=n&&t.timestamp-D.timestamp>n;(e||r)&&Xt(!0)}};const V=t=>{jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.Mutation},t)}))},U=t=>jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.Scroll},t)})),K=t=>jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.CanvasMutation},t)})),Y=new _t({mutationCb:V,adoptedStyleSheetCb:t=>jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.AdoptedStyleSheet},t)}))}),_=new kt({mirror:$t,mutationCb:V,stylesheetManager:Y,recordCrossOriginIframes:S,wrappedEmit:jt});for(const t of M||[])t.getMirror&&t.getMirror({nodeMirror:$t,crossOriginIframeMirror:_.crossOriginIframeMirror,crossOriginIframeStyleMirror:_.crossOriginIframeStyleMirror});Pt=new Qt({recordCanvas:v,mutationCb:K,win:window,blockClass:r,blockSelector:s,mirror:$t,sampling:f.canvas,dataURLOptions:y});const X=new wt({mutationCb:V,scrollCb:U,bypassOptions:{blockClass:r,blockSelector:s,maskTextClass:l,maskTextSelector:c,inlineStylesheet:d,maskInputOptions:F,dataURLOptions:y,maskTextFn:m,maskInputFn:g,recordCanvas:v,inlineImages:w,sampling:f,slimDOMOptions:L,iframeManager:_,stylesheetManager:Y,canvasManager:Pt,keepIframeSrcFn:T},mirror:$t});Xt=(t=!1)=>{var e,n,o,i,u,p;jt(Ht({type:H.Meta,data:{href:window.location.href,width:G(),height:Z()}}),t),Y.reset(),at.forEach((t=>t.lock()));const h=function(t,e){var n=e||{},o=n.mirror,r=void 0===o?new a:o,s=n.blockClass,i=void 0===s?"rr-block":s,l=n.blockSelector,c=void 0===l?null:l,d=n.maskTextClass,u=void 0===d?"rr-mask":d,p=n.maskTextSelector,h=void 0===p?null:p,g=n.inlineStylesheet,m=void 0===g||g,I=n.inlineImages,C=void 0!==I&&I,f=n.recordCanvas,y=void 0!==f&&f,b=n.maskAllInputs,v=void 0!==b&&b,S=n.maskTextFn,A=n.maskInputFn,k=n.slimDOM,w=void 0!==k&&k,M=n.dataURLOptions,T=n.preserveWhiteSpace,R=n.onSerialize,N=n.onIframeLoad,O=n.iframeLoadTimeout,x=n.onStylesheetLoad,F=n.stylesheetLoadTimeout,L=n.keepIframeSrcFn;return E(t,{doc:t,mirror:r,blockClass:i,blockSelector:c,maskTextClass:u,maskTextSelector:h,skipChild:!1,inlineStylesheet:m,maskInputOptions:!0===v?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===v?{password:!0}:v,maskTextFn:S,maskInputFn:A,slimDOMOptions:!0===w||"all"===w?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===w,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===w?{}:w,dataURLOptions:M,inlineImages:C,recordCanvas:y,preserveWhiteSpace:T,onSerialize:R,onIframeLoad:N,iframeLoadTimeout:O,onStylesheetLoad:x,stylesheetLoadTimeout:F,keepIframeSrcFn:void 0===L?function(){return!1}:L,newlyAddedElement:!1})}(document,{mirror:$t,blockClass:r,blockSelector:s,maskTextClass:l,maskTextSelector:c,inlineStylesheet:d,maskAllInputs:F,maskTextFn:m,slimDOM:L,dataURLOptions:y,recordCanvas:v,inlineImages:w,onSerialize:t=>{J(t,$t)&&_.addIframe(t),z(t,$t)&&Y.trackLinkElement(t),Q(t)&&X.addShadowRoot(t.shadowRoot,document)},onIframeLoad:(t,e)=>{_.attachIframe(t,e),X.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{Y.attachLinkElement(t,e)},keepIframeSrcFn:T});if(!h)return console.warn("Failed to snapshot the document");jt(Ht({type:H.FullSnapshot,data:{node:h,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(e=null===document||void 0===document?void 0:document.body)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(o=null===document||void 0===document?void 0:document.body)||void 0===o?void 0:o.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(u=null===(i=null===document||void 0===document?void 0:document.body)||void 0===i?void 0:i.parentElement)||void 0===u?void 0:u.scrollTop)||(null===(p=null===document||void 0===document?void 0:document.body)||void 0===p?void 0:p.scrollTop)||0}}})),at.forEach((t=>t.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,$t.getId(document))};try{const t=[];t.push(x("DOMContentLoaded",(()=>{jt(Ht({type:H.DomContentLoaded,data:{}}))})));const e=t=>{var e;return St({mutationCb:V,mousemoveCb:(t,e)=>jt(Ht({type:H.IncrementalSnapshot,data:{source:e,positions:t}})),mouseInteractionCb:t=>jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.MouseInteraction},t)})),scrollCb:U,viewportResizeCb:t=>jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.ViewportResize},t)})),inputCb:t=>jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.Input},t)})),mediaInteractionCb:t=>jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.MediaInteraction},t)})),styleSheetRuleCb:t=>jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.StyleSheetRule},t)})),styleDeclarationCb:t=>jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.StyleDeclaration},t)})),canvasMutationCb:K,fontCb:t=>jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.Font},t)})),selectionCb:t=>{jt(Ht({type:H.IncrementalSnapshot,data:Object.assign({source:j.Selection},t)}))},blockClass:r,ignoreClass:i,maskTextClass:l,maskTextSelector:c,maskInputOptions:F,inlineStylesheet:d,sampling:f,recordCanvas:v,inlineImages:w,userTriggeredOnInput:A,collectFonts:k,doc:t,maskInputFn:g,maskTextFn:m,keepIframeSrcFn:T,blockSelector:s,slimDOMOptions:L,dataURLOptions:y,mirror:$t,iframeManager:_,stylesheetManager:Y,shadowDomManager:X,canvasManager:Pt,ignoreCSSAttributes:R,plugins:(null===(e=null==M?void 0:M.filter((t=>t.observer)))||void 0===e?void 0:e.map((t=>({observer:t.observer,options:t.options,callback:e=>jt(Ht({type:H.Plugin,data:{plugin:t.name,payload:e}}))}))))||[]},I)};_.addLoadListener((n=>{t.push(e(n.contentDocument))}));const n=()=>{Xt(),t.push(e(document)),qt=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():t.push(x("load",(()=>{jt(Ht({type:H.Load,data:{}})),n()}),window)),()=>{t.forEach((t=>t())),qt=!1}}catch(t){console.warn(t)}}te.addCustomEvent=(t,e)=>{if(!qt)throw new Error("please add custom event after start recording");jt(Ht({type:H.Custom,data:{tag:t,payload:e}}))},te.freezePage=()=>{at.forEach((t=>t.freeze()))},te.takeFullSnapshot=t=>{if(!qt)throw new Error("please take full snapshot after start recording");Xt(t)},te.mirror=$t;class ee{events=[];getTriggers=({appId:t})=>{const e=document.querySelectorAll("[data-ssimple-widget]");e&&e.length>0&&e.forEach((e=>{e.addEventListener("click",(()=>{this.iframeWrapper.style.display="flex",this.blur.style.display="block",this.wrapper.style.display="block",this.iframe.contentWindow.postMessage({type:"init",payload:{appId:t}},"*")}))}))};init=({appId:t})=>{if(void 0===console.everything){function i(t){const e=console[t].bind(console);return function(){console.everything.push({type:t,time_stamp:Date.now(),value:Array.from(arguments)}),e.apply(console,arguments)}}console.everything=[],window.onerror=function(t,e,n){return console.everything.push({type:"exception",time_stamp:Date.now(),value:[t]}),!1},window.onunhandledrejection=function(t){console.everything.push({type:"promiseRejection",time_stamp:Date.now(),value:[t.reason]})},["log","error","warn","debug"].forEach((t=>{console[t]=i(t)}))}const e=document.createElement("div");e.id="ssimpleBgBlur",this.blur=e;const n=document.createElement("iframe");n.id="ssimpleIframe",n.src="https://app.ssimple.co/widget",n.crossorigin="anonymous",n.allow="display-capture",this.iframe=n;const o=document.createElement("button");o.innerHTML="Cancel",o.style.color="white",o.style.fontWeight="700",o.style.marginTop="2rem",o.addEventListener("click",(()=>{this.iframe.contentWindow.postMessage({type:"cancelReport"},"*"),this.wrapper.style.display="none",this.events=[]})),this.cancelBtn=o;const r=document.createElement("div");r.id="ssimpleIframeWrapper",r.appendChild(this.iframe),r.appendChild(this.cancelBtn),this.iframeWrapper=r;const s=document.createElement("div");s.id="ssimpleWidget",s.appendChild(this.iframeWrapper),s.appendChild(this.blur),this.wrapper=s,document.head.insertAdjacentHTML("beforeend","\n      <style>\n\t\t\t\t#ssimpleWidget {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\tposition: fixed;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tbottom: 0px;\n\t\t\t\t\tright: 0px;\n\t\t\t\t\tz-index: 999999999 !important;\n\t\t\t\t}\n\t\t\t\t#ssimpleIframe {\n\t\t\t\t\twidth: 95vw;\n\t\t\t\t\theight: 80vh;\n\t\t\t\t\tborder-radius: 16px;\n\t\t\t\t\tmax-width: 800px;\n\t\t\t\t\tmax-height: 700px;\n\t\t\t\t\tz-index: 999999999;\n\t\t\t\t}\n\t\t\t\t#ssimpleIframeWrapper {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\tposition: fixed;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tbottom: 0px;\n\t\t\t\t\tright: 0px;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tz-index: 999999999;\n\t\t\t\t}\n\t\t\t\t#ssimpleBgBlur {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\tposition: fixed;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tbackground-color: rgba(0, 0, 0, 0.25);\n\t\t\t\t\tbackdrop-filter: blur(4px);\n\t\t\t\t\twidth: 100vw;\n\t\t\t\t\theight: 100vh;\n\t\t\t\t\tz-index: 99999999;\n\t\t\t\t}\n\t\t\t\t#ssimpleToolbar {\n\t\t\t\t\tposition: fixed;\n\t\t\t\t\twidth: 150px;\n\t\t\t\t\theight: 2rem;\n\t\t\t\t\tbottom: 20px;\n\t\t\t\t\tleft: calc(50% - 150px / 2);\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tbackground-color: rgba(220, 38, 38, 0.5);\n\t\t\t\t\tborder-radius: 2rem;\n\t\t\t\t\tfont-weight: 700;\n\t\t\t\t\tz-index: 999999999;\n\t\t\t\t}\n\t\t\t\t#ssimpleToolbar:hover {\n\t\t\t\t\tbackground-color: rgba(220, 38, 38, 0.8);\n\t\t\t\t}\n      </style>\n\t\t"),document.body.appendChild(s),this.getTriggers({appId:t}),window.addEventListener("message",(t=>this.receiveMessage(t)))};createToolbar=()=>{const t=document.createElement("button");let e=0,n="00:00";t.id="ssimpleToolbar",t.innerHTML=n+" Stop",t.addEventListener("click",(()=>{this.stopFn(),this.toolbar.remove();const t=this.captureNetworkRequests();this.iframeWrapper.style.display="flex",this.blur.style.display="block",this.wrapper.style.display="block",this.iframe.contentWindow.postMessage({type:"stopRecord",payload:{consoleLogs:JSON.stringify(console.everything),networkRequests:JSON.stringify(t),events:JSON.stringify(this.events)}},"*"),window.sessionStorage.removeItem("isRecording")})),document.body.appendChild(t),setInterval((()=>{e+=1,n=Math.floor(e%3600/60).toString().padStart(2,"0")+":"+Math.floor(e%60).toString().padStart(2,"0"),t.innerHTML=n+" Stop"}),1e3),this.toolbar=t};captureNetworkRequests=()=>{let t=[];const e=performance.getEntriesByType("resource");for(var n=0;n<e.length;n++)t.push(e[n].toJSON());return t};receiveMessage=t=>{if("hideWrapper"===t.data&&(this.wrapper.style.display="none"),"captureScreenshot"===t.data){const t=this.captureNetworkRequests();this.iframe.contentWindow.postMessage({type:"screenshot",payload:{consoleLogs:JSON.stringify(console.everything),networkRequests:JSON.stringify(t)}},"*"),this.wrapper.style.display="block"}"startRecord"===t.data&&(window.sessionStorage.setItem("isRecording","true"),this.wrapper.style.display="none",this.createToolbar(),this.stopFn=te({emit:t=>{this.events.push(t)}})),"stopRecord"===t.data&&(this.wrapper.style.display="block",this.toolbar.remove())}}(t=>{const e=t.ssimple,n=new ee;e.init=n.init,e.getTriggers=n.getTriggers})(e.g)})();